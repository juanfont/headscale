<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <h1>headscale</h1>
    <h2>Apple configuration profiles</h2>
    <p>
      This page provides
      <a href="https://support.apple.com/guide/mdm/mdm-overview-mdmbf9e668/web">
        configuration profiles
      </a>
      for the official Tailscale clients for
    </p>
    <ul>
      <li>
        <a href="https://apps.apple.com/us/app/tailscale/id1470499037?ls=1"
          >iOS</a
        >
      </li>
      <li>
        <a href="https://apps.apple.com/ca/app/tailscale/id1475387142?mt=12"
          >macOS - AppStore Client</a
        >.
      </li>
      <li>
        <a href="https://pkgs.tailscale.com/stable/#macos"
          >macOS - Standalone Client</a
        >.
      </li>
    </ul>
    <p>
      The profiles will configure Tailscale.app to use <code>{{.URL}}</code> as
      its control server.
    </p>

    <h3>Caution</h3>
    <p>
      You should always download and inspect the profile before installing it:
    </p>
    <!--
		<pre><code>curl {{.URL}}/apple/ios</code></pre>
		-->
    <pre><code>curl {{.URL}}/apple/macos</code></pre>

    <h2>Profiles</h2>

    <!--
		<h3>iOS</h3>
		<p>
		    <a href="/apple/ios" download="headscale_ios.mobileconfig">iOS profile</a>
		</p>
		-->

    <h3>macOS</h3>
    <p>
      Headscale can be set to the default server by installing a Headscale
      configuration profile:
    </p>
    <p>
      <a href="/apple/macos-app-store" download="headscale_macos.mobileconfig"
        >macOS AppStore profile</a
      >
      <a href="/apple/macos-standalone" download="headscale_macos.mobileconfig"
        >macOS Standalone profile</a
      >
    </p>

    <ol>
      <li>
        Download the profile, then open it. When it has been opened, there
        should be a notification that a profile can be installed
      </li>
      <li>Open System Preferences and go to "Profiles"</li>
      <li>Find and install the Headscale profile</li>
      <li>Restart Tailscale.app and log in</li>
    </ol>

    <p>Or</p>
    <p>
      Use your terminal to configure the default setting for Tailscale by
      issuing:
    </p>
    <ul>
      <li>
        for app store client:
        <code>defaults write io.tailscale.ipn.macos ControlURL {{.URL}}</code>
      </li>
      <li>
        for standalone client:
        <code>defaults write io.tailscale.ipn.macsys ControlURL {{.URL}}</code>
      </li>
    </ul>

    <p>Restart Tailscale.app and log in.</p>
  </body>
</html>
